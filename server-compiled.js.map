{"version":3,"sources":["server.js"],"names":[],"mappings":"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","file":"server-compiled.js","sourcesContent":["/**\n server.js\n */\n\nvar fs = require('fs');\nvar path = require('path');\nvar express = require('express');\nvar bodyParser = require('body-parser');\nvar app = express();\n\nvar COMMENTS_FILE = path.join(__dirname, 'comments.json');\n\nvar findLargest = require('./routes/findlargest');\n\nfindLargest('./es6', function (er, filename) {\n  if (er) return console.error(er)\n    console.log('largest file was:', filename)\n})\n\n\nvar findlargestmodulized = require('./routes/findlargestmodulized');\nfindlargestmodulized('./es6', function (er, filename) {\n  if (er) return console.error(er)\n  console.log('largest file was:', filename)\n})\n\nvar findlargestasynced = require('./routes/findlargestasynced');\nfindlargestasynced('./es6', function (er, filename) {\n  if (er) return console.error(er)\n  console.log('findlargestasynced file was:', filename)\n})\n\n\nvar Promise = require('q');\n/**\nvar p = new Promise(function(resolve, reject) {\n  resolve(\"hello world 北京\");//\n});\n\np.then(function(str) {\n  console.log( 'then is',str);\n});\n**/\n\n/**\nnew Promise(function(resolve, reject) {\n  resolve(\"hello world\");\n})\n  .then(\n    function(str) {//成功\n      throw new Error(\"uh oh\");\n    },\n    undefined//拒绝\n  )\n  .then(\n    undefined,//成功\n    function(error) {//拒绝\n      alert(error);\n    }\n  );\n**/\n// Exhibit B\n/**\nnew Promise(function(resolve, reject) {\n  resolve(\"hello world hi hi\");\n})\n  .then(\n    function(str) {\n      console.log( 'then is',str);\n      throw new Error(\"uh oh\");\n    },\n    function(error) {\n      console.log( 'error is',error);\n      alert(error);\n    }\n  );\n**/\n//var res=function(){};\n//var rej=function(){};\nnew Promise(function(res, rej) {\n  console.log(Date.now() + \" start setTimeout\");\n  setTimeout(res, 20);\n}).then(function() {\n  console.log(Date.now() + \" timeout call back\");\n});\n/**\nvar readFile = Q.denodeify(fs.readFile);\nvar promise = readFile('./es6/App.js');\n\n\nvar findlargestQ = require('./routes/findlargestQ');\n\nfindlargestQ('./es6')\n  .then(function (filename) {\n    console.log('findlargestQ file was:', filename)\n  })\n  .fail(function(err){\n    console.error(err);\n  });\n\n**/\n\n/**\nvar findlargestGenerator = require('./routes/findlargestGenerator');\n\nfindlargestGenerator('./es6').then(function (filename) {\n    console.log('findlargestQ file was:', filename)\n  })\n  .fail(function(err){\n    console.error(err);\n  });\n**/\n\nvar computeCommon = function* (a, b) {\n  var sum = a + b;\n  console.log(sum);\n  var c = a - b;\n  console.log(c);\n  var d = a * b;\n  console.log(d);\n  var e = a / b;\n  console.log(e);\n};\n\nvar generatorCommon = computeCommon(4, 2);\ngeneratorCommon.next();\n\nvar compute = function* (a, b) {\n  var sum = a + b;\n  yield console.log(sum);\n  var c = a - b;\n  yield console.log(c);\n  var d = a * b;\n  yield console.log(d);\n  var e = a / b;\n  console.log(e);\n};\n\nvar generator = compute(4, 2);\ngenerator.next();\ngenerator.next();\ngenerator.next();\n\n\nvar computeHello = function* (a, b) {\n  var foo = yield a + b;\n  console.log(foo);\n};\n\nvar generatorHello  = computeHello (4, 2);\ngeneratorHello .next();\ngeneratorHello .next(\"Hello world!\"); // Hello world!\n\n\nfs.readFile('README.md', 'utf8', function (err, txt) {\n  if (err) {\n    throw err;\n  }\n  fs.readFile('index.js', 'utf8', function (err, content) {\n    if (err) {\n      throw err;\n    }\n    console.log(content);\n  });\n});\n\nvar flow = function* () {\n  var txt = yield fs.readFile('README.md', 'utf8');\n  console.log('README.md',txt);\n  var content = yield fs.readFile('index.js', 'utf8');\n  console.log('index.js',content);\n};\n\nvar generatorFlow  = flow();\ngeneratorFlow.next();\ngeneratorFlow.next();\n\n//优化的异步方法\nvar helper = function (fn) {\n  return function () {\n    var args = [].slice.call(arguments);\n    var pass;\n    args.push(function () { // 在回调函数中植入收集逻辑\n      if (pass) {\n        pass.apply(null, arguments);\n      }\n    });\n    fn.apply(null, args);\n\n    return function (fn) { // 传入一个收集函数\n      pass = fn;\n    };\n  };\n};\n\nvar readFileAsynHelpter = helper(fs.readFile);\n\nvar flowAsynHelpter = function* () {\n  var txt = yield readFileAsynHelpter('README.md', 'utf8');\n  console.log('README.md is',txt);\n};\n\nvar generatorAsynHelpter = flowAsynHelpter();\nvar ret = generatorAsynHelpter.next(); // 执行readFile('file1.txt', 'utf8');\nret.value(function (err, data) {\n  if (err) {\n    throw err;\n  }\n  generatorAsynHelpter.next(data);\n});\n\nvar co = function (fn) {\n  var generator = fn();\n  var next = function (data) {\n    var result = generator.next(data);\n    if (!result.done) {\n      result.value(function (err, data) {\n        if (err) {\n          throw err;\n        }\n        next(data);\n      });\n    }\n  };\n  next();\n};\n\nco(function* () {\n  var txt = yield readFileAsynHelpter('README.md', 'utf8');\n  console.log(txt);\n  var txt2 = yield readFileAsynHelpter('index.js', 'utf8');\n  console.log(txt2);\n});\n\n\napp.set('port', (process.env.PORT || 3000));\n\napp.use('/react', express.static(path.join(__dirname, './public')));\n\napp.use('/bower_components', express.static(path.join(__dirname,'./bower_components')));\napp.use('/node_modules', express.static(path.join(__dirname,'./node_modules')));\napp.use('/app/styles', express.static(path.join(__dirname,'./app/styles')));\napp.use('/todos', express.static(path.join(__dirname,'./app')));\n\napp.use('/uirouter', express.static(path.join(__dirname,'./ui-router')));\n\napp.use('/nav', express.static(path.join(__dirname,'./nav-router')));\n\napp.use('/reactbboot', express.static(path.join(__dirname,'./react-bootstrap')));\n\napp.use(bodyParser.json());\napp.use(bodyParser.urlencoded({extended: true}));\n\n// Additional middleware which will set headers that we need on each request.\n/*\napp.use(function(req, res, next) {\n    // Set permissive CORS header - this allows this server to be used only as\n    // an API server in conjunction with something like webpack-dev-server.\n    res.setHeader('Access-Control-Allow-Origin', '*');\n\n    // Disable caching so we'll always get the latest comments.\n    res.setHeader('Cache-Control', 'no-cache');\n    next();\n});\n*/\n\napp.get('/api/comments', function(req, res) {\n  fs.readFile(COMMENTS_FILE, function(err, data) {\n    if (err) {\n      console.error(err);\n      process.exit(1);\n    }\n    res.json(JSON.parse(data));\n  });\n});\n\napp.post('/api/comments', function(req, res) {\n  fs.readFile(COMMENTS_FILE, function(err, data) {\n    if (err) {\n      console.error(err);\n      process.exit(1);\n    }\n    var comments = JSON.parse(data);\n    // NOTE: In a real implementation, we would likely rely on a database or\n    // some other approach (e.g. UUIDs) to ensure a globally unique id. We'll\n    // treat Date.now() as unique-enough for our purposes.\n    var newComment = {\n      id: Date.now(),\n      author: req.body.author,\n      text: req.body.text,\n    };\n    comments.push(newComment);\n    fs.writeFile(COMMENTS_FILE, JSON.stringify(comments, null, 4), function(err) {\n      if (err) {\n        console.error(err);\n        process.exit(1);\n      }\n      res.json(comments);\n    });\n  });\n});\n\n\napp.listen(app.get('port'), function() {\n  console.log('Server started: http://localhost:' + app.get('port') + '/');\n});\n"]}